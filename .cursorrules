# Cursor Rules for Wellthy Project

## Database Migrations

**ALWAYS use Supabase CLI for running SQL migrations by default.**

When proposing SQL scripts or migrations:
1. **Primary method**: Use `supabase db push` via Supabase CLI
2. Create scripts that use Supabase CLI: `scripts/run-migration-*.sh`
3. Include authentication handling (access token or login)
4. Only fall back to manual SQL execution if CLI is unavailable

### Migration Script Pattern:
```bash
#!/bin/bash
# Run migration using Supabase CLI
supabase link --project-ref <project-ref>  # if not linked
supabase db push  # applies all pending migrations
```

### When CLI is not available:
- Provide clear instructions for manual execution
- Include the SQL in documentation
- Note that CLI is preferred for future runs

## Code Style
- Use TypeScript strict mode
- Prefer functional components with hooks
- Use Zod for validation schemas
- Follow existing patterns in the codebase

## Testing
- Run `pnpm tsc --noEmit` before committing
- Run `pnpm build` to verify production build
- Test migrations in development before production

